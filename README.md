# API-PVZ: Сервис управления пунктами выдачи заказов

API-PVZ - это сервис для управления пунктами выдачи заказов (ПВЗ), который позволяет создавать ПВЗ, управлять приёмками заказов и товарами.

## Функциональность
- Создание и управление пунктами выдачи заказов
- Открытие и закрытие приёмок заказов
- Добавление товаров различных типов (электроника, одежда, обувь)
- Аутентификация пользователей с разными ролями (клиент, модератор)
- Метрики для мониторинга работы сервиса

## Технологии
- Golang
- PostgreSQL
- Docker & Docker Compose
- Prometheus (для метрик)
- JWT для аутентификации

## Требования
- Go 1.20+
- Docker и Docker Compose
- PostgreSQL
- migrate (инструмент для миграций)

## Установка и запуск

### Клонирование репозитория
```bash
git clone https://github.com/Egorpalan/api-pvz.git
cd api-pvz
```

## Запуск с помощью Docker-compose
Убедитесь что в `.env` и `docker-compose` выставлены нужные вам порты
```bash
make compose-up
```
Это запустит:
* PostgreSQL базу данных на порту 5436 локально и 5432 в контейнере
* API сервис на порту 8080
* Prometheus для сбора метрик

По адресу http://localhost:9000/metrics будут доступны метрики сервиса

## Применение sql-миграций
Для создания таблиц
```bash
make migrate-up
```

Для удаления таблиц
```bash
make migrate-down
```


## Запуск unit-тестов
```bash
make test 
```

## Запуск интеграционного теста
```bash
make test-integration
```